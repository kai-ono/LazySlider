!function(t,i){if("function"==typeof define&&define.amd)define(["module"],i);else if("undefined"!=typeof exports)i(module);else{var s={exports:{}};i(s),t.lazySlider=s.exports}}(this,function(t){"use strict";function n(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}var e=function(){function e(t,i){for(var s=0;s<i.length;s++){var e=i[s];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,e.key,e)}}return function(t,i,s){return i&&e(t.prototype,i),s&&e(t,s),t}}(),i="loaded",s="lazy-slider",a="slide-list-wrap",l="slide-list",r="slide-item",h="slide-next",c="slide-prev",o="slide-navi",u="current",m="slide-navi-active",d="slide-center",v="slide-item-center",f="duplicate-item",p="grabbing",E={getPropertyWithPrefix:function(t){var i=document.body.style,s=t,e=t.slice(0,1).toUpperCase()+t.slice(1);return void 0!==i.webkitTransform&&(s="webkit"+e),void 0!==i.mozTransform&&(s="moz"+e),void 0!==i.msTransform&&(s="ms"+e),s},setTransitionEnd:function(i,s){var t=/webkit/i.test(navigator.appVersion)?"webkitTransitionEnd":"opera"in window?"oTransitionEnd":"transitionend";i.addEventListener(t,function(t){t.target===i&&null!==t.propertyName.match("transform")&&s()})},addElWithArgs:function(i){var s=this,t=void 0===i.target.length?[i.target]:[].slice.call(i.target);i.listener=function(t){i.func.call(s,t,i.args)};for(var e=0;e<t.length;e++)for(var l=0;l<i.events.length;l++)t[e].addEventListener(i.events[l],i.listener);return i}},g=function(){function l(t,i,s,e){n(this,l),this.elm=t,this.showItem=i,this.listWrap=document.createElement("div"),this.list=this.elm.children[0],this.listW=0,this.listPxW=0,this.duration=s,this.item=[].slice.call(this.list.children),this.itemLen=this.item.length/e,this.itemW=100/this.itemLen,this.dupItemLen=0,this.dupItemLeftLen=0,this.showW=this.itemW*this.showItem,this.current=0,this.actionCb=[],this.dir=!0,this.adjustCenter=0}return e(l,[{key:"element",value:function(){this.elm.classList.add(i),this.listW=this.list.style.width=100/this.showItem*this.itemLen+"%",this.list.style[E.getPropertyWithPrefix("transitionDuration")]=this.duration+"s",this.listPxW=this.list.offsetWidth,this.elm.appendChild(this.listWrap),this.listWrap.classList.add(a),this.listWrap.appendChild(this.list),this.item=this.sortArr()}},{key:"sortArr",value:function(){var t=this.item.slice(0,this.itemLen);return this.item.slice(this.itemLen,this.item.length).concat(t)}}]),l}(),y=function(){function s(t,i){n(this,s),this.lazySlider=t,this.classElm=i,this.hasPrev=""!==this.lazySlider.prev,this.hasNext=""!==this.lazySlider.next,this.buttonEventsArr=[]}return e(s,[{key:"button",value:function(){this.btnLiPrev=this.createButton(!1),this.btnLiNext=this.createButton(!0),this.buttonEventsArr.push(E.addElWithArgs.call(this,{target:this.btnLiPrev,events:["click"],func:this.buttonAction,args:!1})),this.buttonEventsArr.push(E.addElWithArgs.call(this,{target:this.btnLiNext,events:["click"],func:this.buttonAction,args:!0}))}},{key:"createButton",value:function(t){var i=this.hasPrev,s=this.btnLiPrev,e=c,l=this.lazySlider.prev;return t&&(i=this.hasNext,s=this.btnLiNext,e=h,l=this.lazySlider.next),i?s=this.classElm.elm.querySelector(l):((s=document.createElement("div")).classList.add(e),this.classElm.elm.appendChild(s)),s}},{key:"buttonAction",value:function(t,i){if(!this.lazySlider.actionLock){var s=(this.classElm.dir=i)?++this.classElm.current:--this.classElm.current;this.lazySlider.action(s,this.classElm,!1)}}}]),s}(),L=function(){function s(t,i){n(this,s),this.lazySlider=t,this.classElm=i,this.naviWrap=document.createElement("div"),this.naviUl=document.createElement("ul"),this.fragment=document.createDocumentFragment(),this.tmpNum=Math.ceil(this.classElm.itemLen/this.lazySlider.slideNum),this.num=this.tmpNum>this.lazySlider.showItem+1&&!this.lazySlider.loop?this.tmpNum-(this.lazySlider.showItem-1):this.tmpNum,this.naviEventsArr=[]}return e(s,[{key:"navi",value:function(){var s=this;this.naviWrap.classList.add(o);for(var t=0;t<this.num;t++){var i=document.createElement("li"),e=document.createElement("span");i.appendChild(e),i.classList.add(u+t),this.fragment.appendChild(i),this.naviEventsArr.push(E.addElWithArgs.call(this,{target:i,events:["click"],func:function(t){[].slice.call(t.currentTarget.classList).forEach(function(t){if(null!==t.match(u)){var i=Math.ceil(parseInt(t.replace(u,""))*s.lazySlider.slideNum);s.classElm.dir=!0,s.lazySlider.action(i,s.classElm,!0)}})}}))}this.naviUl.appendChild(this.fragment),this.naviWrap.appendChild(this.naviUl),this.classElm.elm.appendChild(this.naviWrap),this.classElm.navi=this.naviUl,this.classElm.naviChildren=this.naviUl.querySelectorAll("li"),this.setCurrentNavi(this.classElm),this.classElm.actionCb.push(function(t){s.setCurrentNavi(t)})}},{key:"setCurrentNavi",value:function(t){var i=Math.ceil(t.current/this.lazySlider.slideNum);i<0&&(i=t.naviChildren.length-1),i>t.naviChildren.length-1&&(i=0);for(var s=0;s<t.naviChildren.length;s++)t.naviChildren[s].classList.remove(m);t.naviChildren[i].classList.add(m)}}]),s}(),w=function(){function s(t,i){n(this,s),this.lazySlider=t,this.classElm=i,this.autoID=0,this.isPause=!1}return e(s,[{key:"auto",value:function(){var t=this;E.setTransitionEnd(this.classElm.list,function(){if(t.classElm.dragging||t.isPause)return!1;t.clear(),t.timer()}),this.timer()}},{key:"timer",value:function(){var t=this;this.autoID=setTimeout(function(){t.lazySlider.actionLock||(t.classElm.dir=!0,t.lazySlider.action(++t.classElm.current,t.classElm,!1))},this.lazySlider.interval)}},{key:"clear",value:function(){if(void 0===this.autoID)return!1;clearTimeout(this.autoID)}},{key:"stop",value:function(){this.isPause=!0,this.clear()}},{key:"play",value:function(){this.isPause=!1,this.clear(),this.timer()}}]),s}(),k=function(){function s(t,i){n(this,s),this.lazySlider=t,this.classElm=i,this.cbTimerID=null,this.itemUnitNum=this.lazySlider.itemUnitNum,this.dupArr=[]}return e(s,[{key:"loop",value:function(){1===this.itemUnitNum?this.cloneItems():this.setDupItemsManually(),this.init()}},{key:"cloneItems",value:function(){for(var t=document.createDocumentFragment(),i=0;i<2;i++)for(var s=0;s<this.classElm.item.length;s++){var e=this.classElm.item[s].cloneNode(!0);e.classList.add(f+(i+1)),t.appendChild(e),this.dupArr.push(e)}this.classElm.list.appendChild(t)}},{key:"setDupItemsManually",value:function(){for(var t=1;t<this.itemUnitNum;t++)for(var i=0;i<this.classElm.itemLen;i++){var s=t*this.classElm.itemLen+i;this.classElm.item[s].classList.add(f+t),this.dupArr.push(this.classElm.item[s])}}},{key:"init",value:function(){var t=this;this.classElm.dupItemLen=this.dupArr.length,this.classElm.dupItemLeftLen=this.classElm.itemLen,this.classElm.item=1===this.itemUnitNum?this.dupArr.concat(this.classElm.item):this.classElm.item,this.classElm.itemW=100/this.classElm.item.length,this.classElm.list.style.width=100/this.lazySlider.showItem*(this.classElm.itemLen+this.classElm.dupItemLen)+"%",this.classElm.list.style[E.getPropertyWithPrefix("transitionDuration")]="0s",this.classElm.list.style[E.getPropertyWithPrefix("transform")]="translate3d("+-this.classElm.itemW*(this.classElm.dupItemLeftLen-this.classElm.adjustCenter)+"%,0,0)",setTimeout(function(){t.classElm.list.style[E.getPropertyWithPrefix("transitionDuration")]=t.classElm.duration+"s"},0),E.setTransitionEnd(this.classElm.list,function(){t.resetPos()})}},{key:"resetPos",value:function(){var t=this;if(!(0<=this.classElm.current&&this.classElm.current<this.classElm.itemLen)){var i=this.classElm.dir?this.classElm.itemW*(this.classElm.current-this.classElm.adjustCenter):this.classElm.itemW*(2*this.classElm.itemLen-this.lazySlider.slideNum-this.classElm.adjustCenter);this.classElm.list.style[E.getPropertyWithPrefix("transitionDuration")]="0s",this.classElm.current=0<=this.classElm.current?0:this.classElm.itemLen-this.lazySlider.slideNum,this.classElm.list.style[E.getPropertyWithPrefix("transform")]="translate3d("+-i+"%,0,0)",clearTimeout(this.cbTimerID),this.cbTimerID=setTimeout(function(){t.classElm.list.style[E.getPropertyWithPrefix("transitionDuration")]=t.lazySlider.duration+"s",t.lazySlider.actionLock=!1},1)}}}]),s}(),b=function(){function s(t,i){n(this,s),this.lazySlider=t,this.classElm=i,this.classElm.adjustCenter=Math.floor(this.lazySlider.showItem/2)}return e(s,[{key:"center",value:function(){var i=this;this.classElm.actionCb.push(function(t){i.setCenter(t)}),this.classElm.elm.classList.add(d),this.setCenter(this.classElm)}},{key:"setCenter",value:function(t){for(var i=t.current<0?t.item.length-1:t.current,s=0;s<t.item.length;s++)t.item[s].classList.remove(v);if(this.lazySlider.loop){var e=void 0;i+t.itemLen>t.item.length?e=t.itemLen-1:i===t.itemLen&&(e=0),void 0!==t.item[e]&&t.item[e].classList.add(v)}t.item[i].classList.add(v)}}]),s}(),A=function(){function s(t,i){n(this,s),this.lazySlider=t,this.classElm=i,this.showItem=this.lazySlider.showItem,this.elm=this.classElm.elm,this.list=this.classElm.list,this.classElm.dragging=!1,this.touchObject={},this.hasLink=!1,this.disabledClick=!0,this.swiping=!1,this.swipeEventsArr=[]}return e(s,[{key:"swipe",value:function(){this.linkElm=this.classElm.list.querySelectorAll("a"),this.hasLink=0<this.linkElm.length,this.handleEvents(!1)}},{key:"handleEvents",value:function(t){this.hasLink&&(this.swipeEventsArr.push(E.addElWithArgs.call(this,{target:this.linkElm,events:["click"],func:this.clickHandler,args:{action:"clicked"}})),this.swipeEventsArr.push(E.addElWithArgs.call(this,{target:this.linkElm,events:["dragstart"],func:this.pvtDefault,args:{action:"dragstart"}}))),this.swipeEventsArr.push(E.addElWithArgs.call(this,{target:this.classElm.list,events:["touchstart","mousedown"],func:this.handler,args:{action:"start"}})),this.swipeEventsArr.push(E.addElWithArgs.call(this,{target:this.classElm.list,events:["touchmove","mousemove"],func:this.handler,args:{action:"move"}})),this.swipeEventsArr.push(E.addElWithArgs.call(this,{target:this.classElm.list,events:["touchend","touchcancel","mouseup","mouseleave"],func:this.handler,args:{action:"end"}}))}},{key:"handler",value:function(t,i){switch(this.touchObject.fingerCount=void 0!==t.touches?t.touches.length:1,i.action){case"start":this.start(t);break;case"move":this.move(t);break;case"end":this.end(t)}}},{key:"start",value:function(t){if(this.disabledClick=!0,this.swiping=!1,this.classElm.list.classList.add(p),this.lazySlider.actionLock||1!==this.touchObject.fingerCount)return!(this.touchObject={});void 0!==this.lazySlider.Auto&&this.lazySlider.Auto.clear();var i=void 0;void 0!==t.touches&&(i=t.touches[0]),this.touchObject.startX=this.touchObject.curX=void 0!==i?i.pageX:t.clientX,this.touchObject.startY=this.touchObject.curY=void 0!==i?i.pageY:t.clientY,this.classElm.dragging=!0}},{key:"end",value:function(){if(this.classElm.list.classList.remove(p),this.classElm.list.style.transitionDuration=this.lazySlider.duration+"s",!this.classElm.dragging||void 0===this.touchObject.curX)return!1;this.touchObject.startX!==this.touchObject.curX&&(this.touchObject.current=this.classElm.dir?++this.classElm.current:--this.classElm.current,this.lazySlider.action(this.touchObject.current,this.classElm,!1)),this.touchObject={},this.disabledClick=!!this.swiping,this.classElm.dragging=!1}},{key:"move",value:function(t){if(this.classElm.dragging){this.lazySlider.actionLock=this.swiping=!0,this.classElm.list.style[E.getPropertyWithPrefix("transitionDuration")]="0.2s";var i=t.touches;this.touchObject.curX=void 0!==i?i[0].pageX:t.clientX;var s=(this.classElm.current+this.classElm.dupItemLeftLen-this.classElm.adjustCenter)*this.classElm.itemW,e=this.touchObject.curX-this.touchObject.startX,l=e/this.classElm.listPxW*35-s;this.classElm.dir=e<0,this.list.style[E.getPropertyWithPrefix("transform")]="translate3d("+l+"%,0,0)",this.pvtDefault(t)}}},{key:"pvtDefault",value:function(t){t.preventDefault()}},{key:"clickHandler",value:function(t){this.swiping&&(t.stopImmediatePropagation(),t.stopPropagation(),t.preventDefault())}}]),s}(),S=function(){function i(t){n(this,i),this.args=void 0!==t?t:{},this.node=void 0!==this.args.elm?this.args.elm:document.querySelectorAll("."+s),this.nodeArr=0<this.node.length?[].slice.call(this.node):[this.node],this.interval=void 0!==this.args.interval?this.args.interval:3e3,this.duration=void 0!==this.args.duration?this.args.duration:.5,this.showItem=void 0!==this.args.showItem?this.args.showItem:1,this.slideNum=void 0!==this.args.slideNum?this.args.slideNum:this.showItem,this.prev=void 0!==this.args.prev?this.args.prev:"",this.next=void 0!==this.args.next?this.args.next:"",this.itemUnitNum=void 0!==this.args.itemUnitNum?this.args.itemUnitNum:1,this.auto=!1!==this.args.auto,this.center=!0===this.args.center,this.loop=!0===this.args.loop,this.btn=!1!==this.args.btn,this.navi=!1!==this.args.navi,this.swipe=!1!==this.args.swipe,this.actionLock=!1,this.elmArr=[],this.registedEventArr=[]}return e(i,[{key:"slide",value:function(){for(var t=this,i=0;i<this.nodeArr.length;i++){this.elmArr.push(new g(this.nodeArr[i],this.showItem,this.duration,this.itemUnitNum));var s=this.elmArr[i];s.element(),s.list.classList.add(l),[].map.call(s.item,function(t){t.classList.add(r)}),this.center&&(this.Center=this.classCenter=new b(this,s),this.Center.center()),s.item.length<=this.showItem||(this.loop&&(this.Loop=new k(this,s).loop()),this.btn&&(this.Button=new y(this,s).button()),this.navi&&(this.Navi=new L(this,s).navi()),this.swipe&&(this.Swipe=new A(this,s).swipe()),this.auto&&(this.Auto=new w(this,s),this.Auto.auto()),E.setTransitionEnd(s.list,function(){t.actionLock=!1}))}}},{key:"action",value:function(t,i,s){var e=this;if(void 0!==this.Auto&&this.Auto.clear(),this.actionLock=!0,void 0===s||!s)for(var l=1;l<this.slideNum;l++)t=i.dir?++t:--t;var n,a=i.dir?t-this.slideNum:t+this.slideNum,r=i.dir?i.itemLen-t:a;0<(n=r)&&n<e.slideNum&&(t=i.dir?a+r:a-r),this.loop||(t>i.itemLen-this.showItem&&(t=0),t<0&&(t=i.itemLen-this.showItem));var h=-(i.itemW*(t-i.adjustCenter)+i.itemW*i.dupItemLeftLen);i.list.style[E.getPropertyWithPrefix("transform")]="translate3d("+h+"%,0,0)",i.current=t;for(var c=0;c<i.actionCb.length;c++)i.actionCb[c](i)}}]),i}();t.exports=S,"undefined"!=typeof window&&!window.LazySlider&&(window.LazySlider=S)});