!function(t,i){if("function"==typeof define&&define.amd)define(["module"],i);else if("undefined"!=typeof exports)i(module);else{var s={exports:{}};i(s),t.lazySlider=s.exports}}(this,function(t){"use strict";function i(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}var s=function(){function t(t,i){for(var s=0;s<i.length;s++){var e=i[s];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,e.key,e)}}return function(i,s,e){return s&&t(i.prototype,s),e&&t(i,e),i}}(),e={load:"loaded",clss:"lazy-slider",list:"slide-list",item:"slide-item",next:"slide-next",prev:"slide-prev",navi:"slide-navi",curr:"current",actv:"slide-navi-active",cntr:"slide-center",itmc:"slide-item-center",dupi:"duplicate-item",grab:"grabbing"},l={GetPropertyWithPrefix:function(t){var i=document.body.style,s=t,e=t.slice(0,1).toUpperCase()+t.slice(1);return void 0!==i.webkitTransform&&(s="webkit"+e),void 0!==i.mozTransform&&(s="moz"+e),void 0!==i.msTransform&&(s="ms"+e),s},SetTransitionEnd:function(t,i){var s=/webkit/i.test(navigator.appVersion)?"webkitTransitionEnd":"opera"in window?"oTransitionEnd":"transitionend";t.addEventListener(s,function(s){s.target===t&&null!==s.propertyName.match("transform")&&i()})},addElWithArgs:function(t){var i=this,s=void 0===t.target.length?[t.target]:[].slice.call(t.target);t.listener=function(s){t.func.call(i,s,t.args)};for(var e=0;e<s.length;e++)for(var l=0;l<t.events.length;l++)s[e].addEventListener(t.events[l],t.listener);return t},removeElWithArgs:function(t){for(var i=void 0===t.target.length?[t.target]:[].slice.call(t.target),s=0;s<i.length;s++)for(var e=0;e<t.events.length;e++)i[s].removeEventListener(t.events[e],t.listener)},ClearEvents:function(t){for(var i=0;i<t.length;i++)l.removeElWithArgs(t[i]);return[]}},n=function(){function t(s,e){i(this,t),this.elm=s,this.showItem=e,this.list=this.elm.children[0],this.listW=0,this.listPxW=0,this.item=[].slice.call(this.list.children),this.itemLen=this.item.length,this.itemW=100/this.itemLen,this.dupItemLen=0,this.dupItemLeftLen=0,this.showW=this.itemW*this.showItem,this.current=0,this.actionCb=[],this.dir=!0,this.adjustCenter=0,this.Init()}return s(t,[{key:"Init",value:function(){this.elm.classList.add(e.load),this.listW=this.list.style.width=100/this.showItem*this.itemLen+"%",this.listPxW=this.list.offsetWidth}}]),t}(),r=function(){function t(s,e){i(this,t),this.lazySlider=s,this.classElm=e,this.hasPrev=""!==this.lazySlider.prev,this.hasNext=""!==this.lazySlider.next,this.buttonEventsArr=[],this.Init()}return s(t,[{key:"Init",value:function(){this.createButton(),this.buttonEventsArr.push(l.addElWithArgs.call(this,{target:this.btnLiPrev,events:["click"],func:this.ButtonAction,args:!1})),this.buttonEventsArr.push(l.addElWithArgs.call(this,{target:this.btnLiNext,events:["click"],func:this.ButtonAction,args:!0}))}},{key:"createButton",value:function(){this.hasPrev?this.btnLiPrev=this.classElm.elm.querySelector(this.lazySlider.prev):(this.btnLiPrev=document.createElement("div"),this.btnLiPrev.classList.add(e.prev),this.classElm.elm.appendChild(this.btnLiPrev)),this.hasNext?this.btnLiNext=this.classElm.elm.querySelector(this.lazySlider.next):(this.btnLiNext=document.createElement("div"),this.btnLiNext.classList.add(e.next),this.classElm.elm.appendChild(this.btnLiNext))}},{key:"ButtonAction",value:function(t,i){if(!this.lazySlider.actionLock){this.classElm.dir=i;var s=i?++this.classElm.current:--this.classElm.current;this.lazySlider.Action(s,this.classElm,!1)}}},{key:"ClearButtonEvents",value:function(){this.buttonEventsArr=l.ClearEvents(this.buttonEventsArr)}}]),t}(),a=function(){function t(s,e){i(this,t),this.lazySlider=s,this.classElm=e,this.naviWrap=document.createElement("div"),this.naviUl=document.createElement("ul"),this.fragment=document.createDocumentFragment(),this.tmpNum=Math.ceil(this.classElm.itemLen/this.lazySlider.slideNum),this.num=this.tmpNum>this.lazySlider.showItem+1&&!this.lazySlider.loop?this.tmpNum-(this.lazySlider.showItem-1):this.tmpNum,this.naviEventsArr=[],this.Init()}return s(t,[{key:"Init",value:function(){var t=this;this.naviWrap.classList.add(e.navi);for(var i=0;i<this.num;i++){var s=document.createElement("li"),n=document.createElement("span");s.appendChild(n),s.classList.add(e.curr+i),this.fragment.appendChild(s),this.naviEventsArr.push(l.addElWithArgs.call(this,{target:s,events:["click"],func:function(i){[].slice.call(i.currentTarget.classList).forEach(function(i){if(null!==i.match(e.curr)){var s=Math.ceil(parseInt(i.replace(e.curr,""))*t.lazySlider.slideNum);t.classElm.dir=!0,t.lazySlider.Action(s,t.classElm,!0)}})}}))}this.naviUl.appendChild(this.fragment),this.naviWrap.appendChild(this.naviUl),this.classElm.elm.appendChild(this.naviWrap),this.classElm.navi=this.naviUl,this.classElm.naviChildren=this.naviUl.querySelectorAll("li"),this.SetCurrentNavi(this.classElm),this.classElm.actionCb.push(function(i){t.SetCurrentNavi(i)})}},{key:"SetCurrentNavi",value:function(t){var i=Math.ceil(t.current/this.lazySlider.slideNum);i<0&&(i=t.naviChildren.length-1),i>t.naviChildren.length-1&&(i=0);for(var s=0;s<t.naviChildren.length;s++)t.naviChildren[s].classList.remove(e.actv);t.naviChildren[i].classList.add(e.actv)}},{key:"ClearNaviEvents",value:function(){this.naviEventsArr=l.ClearEvents(this.naviEventsArr)}}]),t}(),h=function(){function t(s,e){i(this,t),this.lazySlider=s,this.classElm=e,this.Init()}return s(t,[{key:"Init",value:function(){var t=this,i=function(){t.classElm.autoID=setTimeout(function(){t.classElm.dir=!0,t.lazySlider.Action(++t.classElm.current,t.classElm,!1)},t.lazySlider.interval)};i(),l.SetTransitionEnd(this.classElm.list,function(){if(t.classElm.dragging)return!1;t.Clear(),i()})}},{key:"Clear",value:function(){var t=this.classElm.autoID;if(void 0===t)return!1;clearTimeout(t)}}]),t}(),c=function(){function t(s,e){i(this,t),this.lazySlider=s,this.classElm=e,this.fragment=document.createDocumentFragment(),this.dupArr=[],this.Init()}return s(t,[{key:"Init",value:function(){for(var t=this,i=0;i<2;i++)for(var s=0;s<this.classElm.item.length;s++){var n=this.classElm.item[s].cloneNode(!0);n.classList.add(e.dupi),this.fragment.appendChild(n),this.dupArr.push(n)}this.classElm.dupItemLen=this.dupArr.length,this.classElm.dupItemLeftLen=this.classElm.item.length,this.classElm.item=this.dupArr.concat(this.classElm.item),this.classElm.list.appendChild(this.fragment),this.classElm.list.style.width=100/this.lazySlider.showItem*(this.classElm.itemLen+this.classElm.dupItemLen)+"%",this.classElm.itemW=100/this.classElm.item.length,this.classElm.list.style[l.GetPropertyWithPrefix("transform")]="translate3d("+-this.classElm.itemW*(this.classElm.dupItemLeftLen-this.classElm.adjustCenter)+"%,0,0)",l.SetTransitionEnd(this.classElm.list,function(){t.CallBack()})}},{key:"CallBack",value:function(){var t=this;if(this.classElm.current<0||this.classElm.current>this.classElm.itemLen-1){var i=!(this.classElm.current<0);this.classElm.list.style[l.GetPropertyWithPrefix("transitionDuration")]="0s";for(var s=0;s<this.classElm.itemLen;s++)this.classElm.item[s].children[0].style[l.GetPropertyWithPrefix("transitionDuration")]="0s";var e=this.classElm.dir?this.classElm.itemW*(this.classElm.current-this.classElm.adjustCenter):this.classElm.itemW*(2*this.classElm.itemLen-this.lazySlider.slideNum-this.classElm.adjustCenter);this.classElm.current=i?0:this.classElm.itemLen-this.lazySlider.slideNum,this.classElm.list.style[l.GetPropertyWithPrefix("transform")]="translate3d("+-e+"%,0,0)",this.lazySlider.center&&this.lazySlider.classCenter.SetCenter(this.classElm),setTimeout(function(){t.classElm.list.style[l.GetPropertyWithPrefix("transitionDuration")]=t.lazySlider.duration+"s";for(var i=0;i<t.classElm.itemLen;i++)t.classElm.item[i].children[0].style[l.GetPropertyWithPrefix("transitionDuration")]="0.1s"},0)}}}]),t}(),o=function(){function t(s,e){i(this,t),this.lazySlider=s,this.classElm=e,this.classElm.adjustCenter=Math.floor(this.lazySlider.showItem/2),this.Init()}return s(t,[{key:"Init",value:function(){var t=this;this.classElm.actionCb.push(function(i){t.SetCenter(i)}),this.classElm.elm.classList.add(e.cntr),this.SetCenter(this.classElm)}},{key:"SetCenter",value:function(t){for(var i=t.current<0?t.item.length-1:t.current,s=0;s<t.item.length;s++)t.item[s].classList.remove(e.itmc);t.item[i].classList.add(e.itmc)}}]),t}(),u=function(){function t(s,e){i(this,t),this.lazySlider=s,this.classElm=e,this.showItem=this.lazySlider.showItem,this.elm=this.classElm.elm,this.list=this.classElm.list,this.classElm.dragging=!1,this.touchObject={},this.hasLink=!1,this.disabledClick=!0,this.swiping=!1,this.swipeEventsArr=[],this.init()}return s(t,[{key:"init",value:function(){this.linkElm=this.classElm.list.querySelectorAll("a"),this.hasLink=this.linkElm.length>0,this.handleEvents(!1)}},{key:"handleEvents",value:function(t){this.hasLink&&(this.swipeEventsArr.push(l.addElWithArgs.call(this,{target:this.linkElm,events:["click"],func:this.clickHandler,args:{action:"clicked"}})),this.swipeEventsArr.push(l.addElWithArgs.call(this,{target:this.linkElm,events:["dragstart"],func:this.pvtDefault,args:{action:"dragstart"}}))),this.swipeEventsArr.push(l.addElWithArgs.call(this,{target:this.classElm.list,events:["touchstart","mousedown"],func:this.Handler,args:{action:"start"}})),this.swipeEventsArr.push(l.addElWithArgs.call(this,{target:this.classElm.list,events:["touchmove","mousemove"],func:this.Handler,args:{action:"move"}})),this.swipeEventsArr.push(l.addElWithArgs.call(this,{target:this.classElm.list,events:["touchend","touchcancel","mouseup","mouseleave"],func:this.Handler,args:{action:"end"}}))}},{key:"ClearSwipeEvents",value:function(){this.swipeEventsArr=l.ClearEvents(this.swipeEventsArr)}},{key:"Handler",value:function(t,i){switch(this.touchObject.fingerCount=void 0!==t.touches?t.touches.length:1,i.action){case"start":this.Start(t);break;case"move":this.Move(t);break;case"end":this.End(t)}}},{key:"Start",value:function(t){if(this.disabledClick=!0,this.swiping=!1,this.swipeEventsArr.window=l.addElWithArgs.call(this,{target:window,events:["touchmove"],func:this.pvtDefault,args:{}}),this.classElm.list.classList.add(e.grab),this.lazySlider.actionLock||1!==this.touchObject.fingerCount)return this.touchObject={},!1;clearTimeout(this.classElm.autoID);var i=void 0;void 0!==t.touches&&(i=t.touches[0]),this.touchObject.startX=this.touchObject.curX=void 0!==i?i.pageX:t.clientX,this.touchObject.startY=this.touchObject.curY=void 0!==i?i.pageY:t.clientY,this.classElm.dragging=!0}},{key:"End",value:function(){if(l.removeElWithArgs(this.swipeEventsArr.window),this.classElm.list.classList.remove(e.grab),this.classElm.list.style.transitionDuration=this.lazySlider.duration+"s",!this.classElm.dragging||void 0===this.touchObject.curX)return!1;this.touchObject.startX!==this.touchObject.curX&&(this.touchObject.current=this.classElm.dir?++this.classElm.current:--this.classElm.current,this.lazySlider.Action(this.touchObject.current,this.classElm,!1)),this.touchObject={},this.disabledClick=!!this.swiping,this.classElm.dragging=!1}},{key:"Move",value:function(t){if(this.classElm.dragging){this.lazySlider.actionLock=this.swiping=!0,this.classElm.list.style[l.GetPropertyWithPrefix("transitionDuration")]="0.2s";var i=t.touches;this.touchObject.curX=void 0!==i?i[0].pageX:t.clientX;var s=(this.classElm.current+this.classElm.dupItemLeftLen-this.classElm.adjustCenter)*this.classElm.itemW,e=this.touchObject.curX-this.touchObject.startX,n=e/this.classElm.listPxW*35-s;this.classElm.dir=e<0,this.list.style[l.GetPropertyWithPrefix("transform")]="translate3d("+n+"%,0,0)"}}},{key:"pvtDefault",value:function(t){t.preventDefault()}},{key:"clickHandler",value:function(t){this.swiping&&(t.stopImmediatePropagation(),t.stopPropagation(),t.preventDefault())}}]),t}(),d=function(){function t(s){i(this,t),this.args=void 0!==s?s:{},this.node=void 0!==this.args.elm?this.args.elm:document.querySelectorAll("."+e.clss),this.nodeArr=this.node.length>0?[].slice.call(this.node):[this.node],this.interval=void 0!==this.args.interval?this.args.interval:3e3,this.duration=void 0!==this.args.duration?this.args.duration:.5,this.showItem=void 0!==this.args.showItem?this.args.showItem:1,this.slideNum=void 0!==this.args.slideNum?this.args.slideNum:this.showItem,this.prev=void 0!==this.args.prev?this.args.prev:"",this.next=void 0!==this.args.next?this.args.next:"",this.auto=!1!==this.args.auto,this.center=!0===this.args.center,this.loop=!0===this.args.loop,this.btn=!1!==this.args.btn,this.navi=!1!==this.args.navi,this.swipe=!1!==this.args.swipe,this.actionLock=!1,this.elmArr=[],this.registedEventArr=[],this.Init()}return s(t,[{key:"Init",value:function(){for(var t=this,i=0;i<this.nodeArr.length;i++){this.elmArr.push(new n(this.nodeArr[i],this.showItem));var s=this.elmArr[i];s.list.classList.add(e.list),[].map.call(s.item,function(t){t.classList.add(e.item)}),l.SetTransitionEnd(s.list,function(){t.actionLock=!1}),this.center&&(this.CENTER=this.classCenter=new o(this,s)),this.loop&&(this.LOOP=new c(this,s)),this.btn&&(this.BUTTON=new r(this,s)),this.navi&&(this.NAVI=new a(this,s)),this.swipe&&(this.SWIPE=new u(this,s)),this.auto&&(this.AUTO=new h(this,s))}}},{key:"Action",value:function(t,i,s){var e=this;if(clearTimeout(i.autoID),this.actionLock=!0,void 0===s||!s)for(var n=1;n<this.slideNum;n++)t=i.dir?++t:--t;var r,a=i.dir?t-this.slideNum:t+this.slideNum,h=i.dir?i.itemLen-t:a;(r=h)>0&&r<e.slideNum&&(t=i.dir?a+h:a-h),this.loop||(t>i.itemLen-this.showItem&&(t=0),t<0&&(t=i.itemLen-this.showItem));var c=-(i.itemW*(t-i.adjustCenter)+i.itemW*i.dupItemLeftLen);i.list.style[l.GetPropertyWithPrefix("transform")]="translate3d("+c+"%,0,0)",i.current=t;for(var o=0;o<i.actionCb.length;o++)i.actionCb[o](i)}},{key:"Destroy",value:function(){this.ClearAllEvents()}},{key:"ClearAllEvents",value:function(){this.BUTTON.ClearButtonEvents(),this.NAVI.ClearNaviEvents(),this.SWIPE.ClearSwipeEvents()}}]),t}();t.exports=d,"undefined"!=typeof window&&!window.LazySlider&&(window.LazySlider=d)});